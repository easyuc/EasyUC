load SMC2.
functionality
  SMC2.SMC2Real
  (SMC.SMCReal(KeyExchange.KEReal),
  SMC.SMCReal(KeyExchange.KEReal)).
real.
send
((env_root_addr, 1))@SMC2.SMC2Dir.Pt1.smc_req(([], 1),T.testtext)$func.
step.
step.
step.
step.
step.
step.
step.
step.
step.
step.
assert MsgOut
((func ++ [3]))$
Forwarding.FwAdv.fw_obs
((func ++ [], 1), (func ++ [], 2),
 (epdp_pair_univ epdp_port_univ epdp_port_univ).`enc
 ((env_root_addr, 1), ([], 1)))
@((adv, 2))
CtrlAdv.
send ((adv, 2))@Forwarding.FwAdv.fw_ok$((func ++ [3])).
step.
step.
step.
step.
step.
step.
step.
step.
step.
send ((adv, 3))@Forwarding.FwAdv.fw_ok$((func ++ [4])).
step.
step.
step.
step.
step.
step.
step.
step.
step.
step.
step.
step.
step prover timeout=3.
step.
step.
send ((adv, 8))@Forwarding.FwAdv.fw_ok@((func ++ [1; 1; 1], 1)).
step.
step prover timeout=3.
step.
(* this takes us to the ordinary match instruction in KeyExchange/Pt2/WaitFwd1
*)
